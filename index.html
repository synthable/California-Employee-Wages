<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">

<link rel="stylesheet" type="text/css" media="all" href="css/jquery.mobile-1.2.0.min.css" />
<script src="js/jquery-1.8.1.min.js"></script>
<script>
localStorage;

$(document).bind("mobileinit", function() {
	$.mobile.buttonMarkup.hoverDelay = 0;
	$.mobile.nonHistorySelectors = "dialog";
	$.mobile.defaultPageTransition = "slide";

	$.mobile.loader.prototype.options.text = "loading...";
	$.mobile.loader.prototype.options.textVisible = true;
	$.mobile.loader.prototype.options.theme = "a";
});
</script>
<script src="js/jquery.mobile-1.2.0.min.js"></script>

<style type="text/css">
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
</style>
</head>

<body>
	<div data-role="page" id="home">
		<div data-role="header" data-position="fixed" data-id="header">
			<h1>State Worker Pay</h1>
		</div>

		<div data-role="content">
			<input type="search" id="search" value=""/>

			<select name="department" id="department">
						<option value="" class="allagencies">Search All</option>
						<option value="AFRO-AMERICAN MUSEUM">AFRO-AMERICAN MUSEUM</option>
						<option value="AGRICULTURAL LABOR REL BOARD">AGRICULTURAL LABOR REL BOARD</option>
						<option value="AIR RESOURCES BOARD">AIR RESOURCES BOARD</option>
						<option value="ALCOHOLIC BEVERAGE CNTR AP BD ">ALCOHOLIC BEVERAGE CNTR AP BD </option>
						<option value="ALCOHOLIC BEVERAGE CONTROL">ALCOHOLIC BEVERAGE CONTROL</option>
						<option value="ARTS COUNCIL">ARTS COUNCIL</option>
						<option value="BALDWIN HILLS CONSERVANCY">BALDWIN HILLS CONSERVANCY</option>
						<option value="BOARD OF CHIROPRACTIC EXAMRS">BOARD OF CHIROPRACTIC EXAMRS</option>
						<option value="BOARD OF EQUALIZATION">BOARD OF EQUALIZATION</option>
						<option value="BOARD OF GOVERNORS CMTY COLLG ">BOARD OF GOVERNORS CMTY COLLG </option>
						<option value="BOARD OF OSTEOPATHIC EXAMINER ">BOARD OF OSTEOPATHIC EXAMINER </option>
						<option value="BOATING AND WATERWAYS">BOATING AND WATERWAYS</option>
						<option value="BRD PILOT COMM">BRD PILOT COMM</option>
						<option value="BUREAU OF STATE AUDITS">BUREAU OF STATE AUDITS</option><option value="BUSINESS, TRANS &amp; HOUSING AGY ">BUSINESS, TRANS &amp; HOUSING AGY </option><option value="CA Assembly">CA Assembly</option><option value="CA SENATE">CA SENATE</option><option value="CA. ALTERNTVE ERGY SR FN AUTH ">CA. ALTERNTVE ERGY SR FN AUTH </option><option value="CA. CHILDREN/FAMILIES 1ST COM ">CA. CHILDREN/FAMILIES 1ST COM </option><option value="CA. COASTAL COMMISSION">CA. COASTAL COMMISSION</option><option value="CA. DEBT ADVISORY COMMISSION">CA. DEBT ADVISORY COMMISSION</option><option value="CA. DEBT LIMIT ALLOCATION COM ">CA. DEBT LIMIT ALLOCATION COM </option><option value="CA. EARTHQUAKE AUTHORITY">CA. EARTHQUAKE AUTHORITY</option><option value="CA. EDUC FACILITIES AUTHORITY ">CA. EDUC FACILITIES AUTHORITY </option><option value="CA. EMERGENCY MANAGEMENT AGY">CA. EMERGENCY MANAGEMENT AGY</option><option value="CA. GAMBLING CONTROL COMM">CA. GAMBLING CONTROL COMM</option><option value="CA. HEALTH FACILITIES AUTH">CA. HEALTH FACILITIES AUTH</option><option value="CA. INDSTRL DEV FIN ADVSY COM ">CA. INDSTRL DEV FIN ADVSY COM </option><option value="CA. INST FOR REGENERATIVE MED ">CA. INST FOR REGENERATIVE MED </option><option value="CA. JUDICIAL CENTER LIBRARY">CA. JUDICIAL CENTER LIBRARY</option><option value="CA. LAW REVISION COMMISSION">CA. LAW REVISION COMMISSION</option><option value="CA. MEDICAL ASSISTANCE COMM">CA. MEDICAL ASSISTANCE COMM</option><option value="CA. MORTGAGE BOND,TAX CREDIT">CA. MORTGAGE BOND,TAX CREDIT</option><option value="CA. POLLUTN CONTRL FIN AUTH">CA. POLLUTN CONTRL FIN AUTH</option><option value="CA. SCHOOL FINANCE AUTHORITY">CA. SCHOOL FINANCE AUTHORITY</option><option value="CA. TAHOE CONSERVANCY">CA. TAHOE CONSERVANCY</option><option value="CA. TRANSPORTATION COMMISSION ">CA. TRANSPORTATION COMMISSION </option><option value="CALIFORNIA CONSERVATION CORPS ">CALIFORNIA CONSERVATION CORPS </option><option value="CALIFORNIA DEPT OF AGING">CALIFORNIA DEPT OF AGING</option><option value="CALIFORNIA HIGHWAY PATROL">CALIFORNIA HIGHWAY PATROL</option><option value="CALIFORNIA HORSE RACING BOARD ">CALIFORNIA HORSE RACING BOARD </option><option value="CALIFORNIA SENIOR LEGISLATURE ">CALIFORNIA SENIOR LEGISLATURE </option><option value="CALIFORNIA STATE LIBRARY">CALIFORNIA STATE LIBRARY</option><option value="CALIFORNIA STATE LOTTERY COMM ">CALIFORNIA STATE LOTTERY COMM </option><option value="COACHELLA VALLEY MOUNT CONSER ">COACHELLA VALLEY MOUNT CONSER </option><option value="COLORADO RIVER BOARD OF CA.">COLORADO RIVER BOARD OF CA.</option><option value="COMM ON STATE GOVT ORG &amp; ECON ">COMM ON STATE GOVT ORG &amp; ECON </option><option value="COMM ON TEACHER CREDENTIALING ">COMM ON TEACHER CREDENTIALING </option><option value="COMM ON THE STATUS OF WOMEN">COMM ON THE STATUS OF WOMEN</option><option value="COMMISSION ON AGING">COMMISSION ON AGING</option><option value="COMMISSION ON JUDICAL PERFORM ">COMMISSION ON JUDICAL PERFORM </option><option value="COMMISSION ON STATE MANDATES">COMMISSION ON STATE MANDATES</option><option value="COMMUNITY SERVICES/DEVELOPMEN ">COMMUNITY SERVICES/DEVELOPMEN </option><option value="CONSERVATION">CONSERVATION</option><option value="CONSUMER AFFAIRS">CONSUMER AFFAIRS</option><option value="CORPORATIONS">CORPORATIONS</option><option value="CORRECTIONS">CORRECTIONS</option><option value="COURT OF APPEAL">COURT OF APPEAL</option><option value="CSU">CSU</option><option value="CSU ADMINISTRATION">CSU ADMINISTRATION</option><option value="CSU BAKERSFIELD">CSU BAKERSFIELD</option><option value="CSU CA. MARITIME ACADEMY">CSU CA. MARITIME ACADEMY</option><option value="CSU CHANNEL ISLANDS">CSU CHANNEL ISLANDS</option><option value="CSU CHICO">CSU CHICO</option><option value="CSU DOMINGUEZ HILLS">CSU DOMINGUEZ HILLS</option><option value="CSU EAST BAY">CSU EAST BAY</option><option value="CSU FRESNO">CSU FRESNO</option><option value="CSU FULLERTON">CSU FULLERTON</option><option value="CSU HUMBOLDT">CSU HUMBOLDT</option><option value="CSU LONG BEACH">CSU LONG BEACH</option><option value="CSU LOS ANGELES">CSU LOS ANGELES</option><option value="CSU MONTEREY BAY">CSU MONTEREY BAY</option><option value="CSU NORTHRIDGE">CSU NORTHRIDGE</option><option value="CSU POMONA">CSU POMONA</option><option value="CSU SACRAMENTO">CSU SACRAMENTO</option><option value="CSU SAN BERNARDINO">CSU SAN BERNARDINO</option><option value="CSU SAN DIEGO">CSU SAN DIEGO</option><option value="CSU SAN FRANCISCO">CSU SAN FRANCISCO</option><option value="CSU SAN JOSE">CSU SAN JOSE</option><option value="CSU SAN LUIS OBISPO">CSU SAN LUIS OBISPO</option><option value="CSU SAN MARCOS">CSU SAN MARCOS</option><option value="CSU SONOMA">CSU SONOMA</option><option value="CSU STANISLAUS">CSU STANISLAUS</option><option value="DELTA PROTECTION COMMISSION">DELTA PROTECTION COMMISSION</option><option value="DEPARTMENT OF MANAGED CARE">DEPARTMENT OF MANAGED CARE</option><option value="DEPARTMENT OF PUBLIC HEALTH">DEPARTMENT OF PUBLIC HEALTH</option><option value="DEPT OF ALCOHOL &amp; DRUG PRGMS">DEPT OF ALCOHOL &amp; DRUG PRGMS</option><option value="DEPT OF CHILD SUPPORT SERVICE ">DEPT OF CHILD SUPPORT SERVICE </option><option value="DEPT OF FINANCIAL INSTITUTION ">DEPT OF FINANCIAL INSTITUTION </option><option value="DEPT RESOURCES RECYCLE/RECVRY ">DEPT RESOURCES RECYCLE/RECVRY </option><option value="DEVELOPMENTAL SERVICES">DEVELOPMENTAL SERVICES</option><option value="EDUCATION">EDUCATION</option><option value="EDUCATION AUDIT APPEALS PANEL ">EDUCATION AUDIT APPEALS PANEL </option><option value="EMERGENCY MED SERVS AUTHORITY ">EMERGENCY MED SERVS AUTHORITY </option><option value="EMPLOYMENT DEVELOPMENT DEPT">EMPLOYMENT DEVELOPMENT DEPT</option><option value="ENVIRNMTL HLTH HAZRD ASSESS">ENVIRNMTL HLTH HAZRD ASSESS</option><option value="FAIR EMPLOYMENT AND HOUSING">FAIR EMPLOYMENT AND HOUSING</option><option value="FAIR POLITICAL PRACTICES COMM ">FAIR POLITICAL PRACTICES COMM </option><option value="FINANCE">FINANCE</option><option value="FINANCIAL INFO SYS FOR CA OFF ">FINANCIAL INFO SYS FOR CA OFF </option><option value="FISH AND GAME">FISH AND GAME</option><option value="FOOD AND AGRICULTURE">FOOD AND AGRICULTURE</option><option value="FORESTRY AND FIRE PROTECTION">FORESTRY AND FIRE PROTECTION</option><option value="FRANCHISE TAX BOARD">FRANCHISE TAX BOARD</option><option value="GENERAL SERVICES">GENERAL SERVICES</option><option value="GOVERNOR'S OFFICE">GOVERNOR'S OFFICE</option><option value="HABEAS CORPUS RESOURCE CENTER ">HABEAS CORPUS RESOURCE CENTER </option><option value="HEALTH &amp; HUMAN RESOURCES AGY">HEALTH &amp; HUMAN RESOURCES AGY</option><option value="HEALTH SERVICES">HEALTH SERVICES</option><option value="HOUSING AND COMMUNITY DEVELOP ">HOUSING AND COMMUNITY DEVELOP </option><option value="HOUSING FINANCE AGENCY">HOUSING FINANCE AGENCY</option><option value="INDUSTRIAL RELATIONS">INDUSTRIAL RELATIONS</option><option value="INSURANCE">INSURANCE</option><option value="INTERCITY HIGH SPEED RAIL COM ">INTERCITY HIGH SPEED RAIL COM </option><option value="JUDICIAL COUNCIL">JUDICIAL COUNCIL</option><option value="JUSTICE">JUSTICE</option><option value="LABOR AND WORKFORCE DEV AGENC ">LABOR AND WORKFORCE DEV AGENC </option><option value="LEGISLATIVE COUNSEL BUREAU">LEGISLATIVE COUNSEL BUREAU</option><option value="LEGISLATURE- ASSEMBLY">LEGISLATURE- ASSEMBLY</option><option value="LEGISLATURE- SENATE">LEGISLATURE- SENATE</option><option value="MANAGED RISK MEDICAL INS BRD">MANAGED RISK MEDICAL INS BRD</option><option value="MENTAL HEALTH">MENTAL HEALTH</option><option value="MILITARY DEPARTMENT">MILITARY DEPARTMENT</option><option value="MOTOR VEHICLES">MOTOR VEHICLES</option><option value="MUSEUM OF SCIENCE &amp; INDUSTRY">MUSEUM OF SCIENCE &amp; INDUSTRY</option><option value="NATIVE AMERICAN HERITAGE COMM ">NATIVE AMERICAN HERITAGE COMM </option><option value="OFC OF SECTY ENVIRMTL PROTECT ">OFC OF SECTY ENVIRMTL PROTECT </option><option value="OFF STATE CHIEF INFO OFFICER">OFF STATE CHIEF INFO OFFICER</option><option value="OFFICE OF ADMINISTRATIVE LAW">OFFICE OF ADMINISTRATIVE LAW</option><option value="OFFICE OF INSPECTOR GENERAL">OFFICE OF INSPECTOR GENERAL</option><option value="OFFICE OF REAL ESTATE APPRSRS ">OFFICE OF REAL ESTATE APPRSRS </option><option value="OFFICE OF STW HLTH PLNG &amp; DEV ">OFFICE OF STW HLTH PLNG &amp; DEV </option><option value="OFFICE OF SYSTEMS INTEGRATION ">OFFICE OF SYSTEMS INTEGRATION </option><option value="OFFICE OF TRAFFIC SAFETY">OFFICE OF TRAFFIC SAFETY</option><option value="PARKS AND RECREATION">PARKS AND RECREATION</option><option value="PEACE OFF STANDARDS &amp; TRAING">PEACE OFF STANDARDS &amp; TRAING</option><option value="PERSONNEL ADMINISTRATION">PERSONNEL ADMINISTRATION</option><option value="PESTICIDE REGULATION">PESTICIDE REGULATION</option><option value="POSTSECONDARY EDUC COMMISSION ">POSTSECONDARY EDUC COMMISSION </option><option value="PUBLIC EMPL'S RETIREMENT SYS">PUBLIC EMPL'S RETIREMENT SYS</option><option value="PUBLIC EMPLMT RELATIONS BOARD ">PUBLIC EMPLMT RELATIONS BOARD </option><option value="PUBLIC UTILITIES COMMISSION">PUBLIC UTILITIES COMMISSION</option><option value="REAL ESTATE">REAL ESTATE</option><option value="REHABILITATION">REHABILITATION</option><option value="RESOURCES AGENCY">RESOURCES AGENCY</option><option value="SAN DIEGO RIVER CONSERVANCY">SAN DIEGO RIVER CONSERVANCY</option><option value="SAN FRANCISCO BAY CON&amp;DEV CM">SAN FRANCISCO BAY CON&amp;DEV CM</option><option value="SAN GABRIEL LOW LA RIV/MTN CO ">SAN GABRIEL LOW LA RIV/MTN CO </option><option value="SAN JOAQUIN RIVER CONSERVANCY ">SAN JOAQUIN RIVER CONSERVANCY </option><option value="SANTA MONICA MTS CONSERVANCY">SANTA MONICA MTS CONSERVANCY</option><option value="SCHOLARSHARE INVESTMENT BOARD ">SCHOLARSHARE INVESTMENT BOARD </option><option value="SEC FOR STATE &amp; CONS SVS AGY">SEC FOR STATE &amp; CONS SVS AGY</option><option value="SECRETARY OF STATE'S OFFICE">SECRETARY OF STATE'S OFFICE</option><option value="SEISMIC SAFETY COMMISSION">SEISMIC SAFETY COMMISSION</option><option value="SIERRA NEVADA CONSERVANCY">SIERRA NEVADA CONSERVANCY</option><option value="SOCIAL SERVICES">SOCIAL SERVICES</option><option value="STATE COASTAL CONSERVANCY">STATE COASTAL CONSERVANCY</option><option value="STATE COMP INSURANCE FUND">STATE COMP INSURANCE FUND</option><option value="STATE CONTROLLER'S OFFICE">STATE CONTROLLER'S OFFICE</option><option value="STATE COUNCIL ON DEVL DISABL">STATE COUNCIL ON DEVL DISABL</option><option value="STATE ENERGY RES CONS&amp;DEV COM ">STATE ENERGY RES CONS&amp;DEV COM </option><option value="STATE INDEPENDENT LIVING COUN ">STATE INDEPENDENT LIVING COUN </option><option value="STATE LANDS COMMISSION">STATE LANDS COMMISSION</option><option value="STATE PERSONNEL BOARD">STATE PERSONNEL BOARD</option><option value="STATE PUBLIC DEFENDER">STATE PUBLIC DEFENDER</option><option value="STATE TEACHERS RETIREMENT SYS ">STATE TEACHERS RETIREMENT SYS </option><option value="STATE TREASURER'S OFFICE">STATE TREASURER'S OFFICE</option><option value="STATUTORY OFFICERS">STATUTORY OFFICERS</option><option value="STUDENT AID COMMISSION">STUDENT AID COMMISSION</option><option value="SUPREME COURT">SUPREME COURT</option><option value="TOXIC SUBSTANCES CONTROL">TOXIC SUBSTANCES CONTROL</option><option value="TRANSPORTATION">TRANSPORTATION</option><option value="UC BERKELEY">UC BERKELEY</option><option value="UC DANR">UC DANR</option><option value="UC DAVIS">UC DAVIS</option><option value="UC IRVINE">UC IRVINE</option><option value="UC LOS ANGELES">UC LOS ANGELES</option><option value="UC MERCED">UC MERCED</option><option value="UC RIVERSIDE">UC RIVERSIDE</option><option value="UC SAN DIEGO">UC SAN DIEGO</option><option value="UC SAN FRANCISCO">UC SAN FRANCISCO</option><option value="UC SANTA BARBARA">UC SANTA BARBARA</option><option value="UC SANTA CRUZ">UC SANTA CRUZ</option><option value="UC UCOP">UC UCOP</option><option value="VETERANS AFFAIRS">VETERANS AFFAIRS</option><option value="VICTIM COMP &amp; GOV CLAIMS BRD">VICTIM COMP &amp; GOV CLAIMS BRD</option><option value="WATER RESOURCES">WATER RESOURCES</option><option value="WATER RESOURCES CONTROL BOARD ">WATER RESOURCES CONTROL BOARD </option><option value="WILDLIFE CONSERVATION BOARD">WILDLIFE CONSERVATION BOARD</option>
			</select>

			<input type="button" id="submit" value="Search" onClick="App.submit()">

			<ul data-role="listview" data-inset="true" id="results-list">
			</ul>
		</div>

		<div data-role="popup" id="searchPopup" class="ui-content" data-overlay-theme="a">
			<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
			Please enter a name or select a department
		</div>
	</div>

	<div data-role="page" id="details">
		<div data-role="header" data-position="fixed" data-id="header">
			<a href="index.html" data-icon="delete" data-rel="back" style="display: none;">Back</a>
			<h1>Worker Details</h1>
		</div>

		<div data-role="content">
		</div>
	</div>

<script type="text/javascript">
if(navigator.userAgent.match(/(iPhone|iPod|iPad)/i)) {
	$("a[data-rel='back']").show();
}

$("ul#results-list").on("click", "a", function(e) {
	App.details($(this)[0].id, function(data) {
		var employee = [];
		for(var x in data.rows) {
			employee.push( App.getWorker( data.rows[x].c ) );
		}
		$("div#details div[data-role='content']").empty();
		$("div#details div[data-role='content']").append("<br><h2>"+ employee[0].name +"</h2>");

		for(var x in employee) {
			$("div#details div[data-role='content']").append("<div data-role=\"collapsible\">"+
				"<h3>"+ employee[x].year +"</h3>"+
				"<p>Department: <strong>"+ employee[x].department +"</strong></p>"+
				"<p>Title: <strong>"+ employee[x].title +"</strong></p>"+
				"<p>Base Pay: <strong>"+ employee[x].pay.base.f +"</strong></p>"+
				"<p>Overtime Pay: <strong>"+ employee[x].pay.overtime.f +"</strong></p>"+
				"<p>Other Pay: <strong>"+ employee[x].pay.other.f +"</strong></p>"+
				"<p>Total Pay: <strong>"+ employee[x].pay.total.f +"</strong></p>"+
				"<p>Department Avg.: <strong>"+ employee[x].departmentAverage.f +"</strong>"
			+"</div>");
		}
		$("div#details").trigger('create');

		$.mobile.changePage("#details");
	});
});

var App = {
	topSalariesUrl: "http://www.sacbee.com/static/statepay2/json/top_salaries_2011.json",
	detailsUrl: "http://www.sacbee.com/cgi-bin/php/statepay2/employee.php?",
	searchUrl: "http://www.sacbee.com/cgi-bin/php/statepay2/query.php?",

	selectedWorker: null,

	details: function(id, _callback) {
		$.mobile.showPageLoadingMsg();
		var url = App.detailsUrl + "id="+ id;
		$.get(url, null, function(json) {
			$.mobile.hidePageLoadingMsg();
			_callback(json);
		}, "json");
	},

	submit: function() {
		if($("input#search").val() == "" && $("select#department").val() == "") {
			$("div#searchPopup").popup("open", {
				positionTo: "input#submit"
			});
			return false;
		}

		var options = [
			"name="+$("#search").val()
		];
		if($("#department").val() != "") {
			options.push("department="+ $("#department").val());
		}

		$.mobile.showPageLoadingMsg();
		var url = App.searchUrl + options.join("&");
		$.get(url, null, function(json) {
			$("#results-list").empty();

			if(json.rows.length > 0) {
				for(var x in json.rows) {
					var w = App.getWorker( json.rows[x].c );
					$("#results-list").append("<li><a id=\""+ w.id +"\">"+
						"<h4>"+ w.name +"</h4>"+
						"<p>"+ w.department +"</p>"+
						"<p>"+ w.title +"</p>"+
						"<strong>"+ w.pay.total.f +"</strong>"
					+"</a></li>");
				}
			} else {
				$("#results-list").append("<li>"+
					"<center><h4>No Results Found</h4></center>"
				+"</li>");
			}

			$("#results-list").listview("refresh");
			$.mobile.hidePageLoadingMsg();
		}, "json");
	},

	topSalaries: function() {
		$.get(App.topSalariesUrl, null, function(json) {
			if(json.rows.length > 0) {
				for(var x in json.rows) {
					var w = App.getWorker( json.rows[x].c );
					$("#results-list").append("<li><a id=\""+ w.id +"\">"+
						"<h4>"+ w.name +"</h4>"+
						"<p>"+ w.department +"</p>"+
						"<p>"+ w.title +"</p>"+
						"<strong>"+ w.pay.total.f +"</strong>"
					+"</a></li>");
				}
			} else {
				$("#results-list").append("<li>"+
					"<center><h4>No Results Found</h4></center>"
				+"</li>");
			}

			$("#results-list").listview("refresh");
		}, "json");
	},

	getWorker: function(worker) {
		return {
			id: worker[0].v,
			name: worker[1].v +" "+ worker[2].v +" "+ worker[3].v,
			title: worker[4].v || null,
			department: worker[5].v || null,
			pay: {
				base: worker[6] || null,
				other: worker[7] || null,
				overtime: worker[8] || null,
				total: worker[9] || null,
			},
			year: worker[10].v || null,
			departmentAverage: worker[11] || null
		}
	}
}
App.topSalaries();
</script>

</body>
</html>